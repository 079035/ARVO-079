Vulnerability: 
The vulnerability that was patched in the given diff file is the potential buffer overflow. 

Summary of the fix:
The fix in this patch ensures that the length of the owner name does not exceed the maximum allowed length. 

Detailed description of the fix:
In the original code, if the size of the name in the input exceeded the maximum allowed length (OWNER_MAXNAMELEN), the variable `name_len` was set to `OWNER_MAXNAMELEN`, which meant that the buffer `namebuf` could potentially be overflowed if `name_size` was equal to `OWNER_MAXNAMELEN`. 

To fix this issue, the fix ensures that the `name_len` is always less than the maximum length by subtracting 1 from `OWNER_MAXNAMELEN` when comparing it with `name_size`. This ensures that the buffer `namebuf` is not overflowed and prevents potential buffer overflow vulnerabilities.